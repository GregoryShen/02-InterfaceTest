# [读者问题选登：产品上线标准和流程是怎么样的？](https://mp.weixin.qq.com/s/9lt5kCWYerxh7sbhiXAUUg)

提问：产品上线标准和流程是怎么样的？发布后如何去做质量管理，特别是遇到一些比较大的问题应该建立一个处理机制？

回答：

## 上线流程

产品上线的标准和流程一般各个公司都要自己定一套流程。

举例：新功能需求讨论 -> 任务分配 -> 代码编写及测试脚本编写 -> 本地环境测试通过 -> 合入集成环境 -> 集成环境测试通过 -> 发布到预发布环境 -> 预发布环境测试通过 -> 发布到生产环境 -> 生产环境冒烟测试通过

这里的各个环节都可以加一些额外步骤。

常见的有：在集成环境上加一个代码扫描步骤，检查代码合不合规范以及有没有安全风险等。

每个环节之间也可以自定义一些其他环节。比如在本地环境和集成环境之间，定义一个预集成测试，对应到 github 上就是在PR（Pull Request）上做测试。

有的发布环节可以深化，比如从预发布环境发布到生产环境，可以做一个蓝绿部署，甚至是一个灰度发布。像知乎就有灰度发布功能。像 Facebook 还会做 A/B test.

总的来说，产品上线的流程是非常复杂而且各家都不一样的，要看具体业务和实际条件来定。

## 上线标准

上线的标准：仍然是不同公司有不同的做法。

像诺基亚，我们会要求，单元测试通过、代码扫描通过、功能测试通过、集成测试通过、没有遗留A级 bug，遗留的 B 级 bug 小于3个，遗留的 C 级 bug 小于 10个，没有阻碍用户流程的严重 bug，没有安全 bug 等等。这些标准要在项目中进行讨论，不能一概而论。

## 发布后遇到较大问题的处理机制

诺基亚有两套机制：

1. 已上生产的严重 bug，进入 hotfix 快速修复流程。首先开发加班在若干小时内完成代码修复，然后加发紧急版本，测试快速验证完走绿色通道直接进 master 分支，并上线。
2. 还未上生产的严重 bug，进入 stop fix 暂停修复流程。所有代码禁止提交，开发必须先修复严重 bug，并测试通过后发布一个不含此严重 bug 的版本到各个环境上，然后接着开发别的。这两种机制一旦触发，在我以前的公司都会扣开发小组的奖金。并进入严重问题跟踪机制，这里面要做的事情是：分析这个 bug 被引入的根本原因以及讨论以后怎样避免。然后测试会被要求添加回归测试来覆盖这个 bug，避免再出现。